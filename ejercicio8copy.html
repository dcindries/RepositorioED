<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>PUZZLE</title>
	<link rel="stylesheet" href="ejer8_copy.css" type="text/css">
	<script type="text/javascript">
		function empezar(ev) {
			ev.dataTransfer.effectAllowed = "move";
			ev.dataTransfer.setData("Data", ev.target.getAttribute("id"));
			//El dat transfer es como un Array y contiene los datos (Data, i1) de las fotos
			return true;
		}
		function entrar(ev) {
			return true;
		}
		function encima(ev) {
			var arrrastrarID = ev.dataTransfer.getData("Data"); //Leo los datos de Data
			var contenedorID = ev.target.getAttribute("id"); //Leo el atributo id
			if (arrrastrarID.substring(1, 2) === contenedorID.substring(1, 2)) {
				document.getElementById(contenedorID).style.background = "green";
				return false;
			}
			else{
				document.getElementById(contenedorID).style.background = "red";
				return true;
			}
		}
		function soltar(ev) {
			var arrrastrarID = ev.dataTransfer.getData("Data");
			ev.target.appendChild(document.getElementById(arrrastrarID));
			ev.stopPropagation();
			document.getElementById(arrrastrarID).style.border="0px";
			document.getElementById(arrrastrarID).style.margin="0px";
			document.getElementById(arrrastrarID).style.width="204px";
			document.getElementById(arrrastrarID).style.height="204px";
			return true;
		}
		function terminar(ev) {
			ev.dataTransfer.clearData("Data");
			//Aqui borro los datos del datatransfer
			return true;
		}
		function abortar(ev) {
			var contenedorID = ev.target.getAttribute("id");
			document.getElementById(contenedorID).style.background = "#BDBDBD";
			return true;
		}
	</script>
</head>


<body>

	<div id="principal">
		<h1> PUZZLE INFANTIL </h1>
		<div id="imagenes">
			<img id="i1" src="i1.jpg" draggable="true" ondragstart="return empezar(event)"
				ondragend="return terminar(event)">
			<img id="i2" src="i2.jpg" draggable="true" ondragstart="return empezar(event)"
				ondragend="return terminar(event)">
			<img id="i3" src="i3.jpg" draggable="true" ondragstart="return empezar(event)"
				ondragend="return terminar(event)">
			<img id="i4" src="i4.jpg" draggable="true" ondragstart="return empezar(event)"
				ondragend="return terminar(event)">
			<img id="i5" src="i5.jpg" draggable="true" ondragstart="return empezar(event)"
				ondragend="return terminar(event)">
			<img id="i6" src="i6.jpg" draggable="true" ondragstart="return empezar(event)"
				ondragend="return terminar(event)">
		</div>
		<div id="contenedores">
			<div id="p1" ondragenter="return entrar(event)" ondragover="return encima(event)"
				ondrop="return soltar(event)" ondragleave="return abortar(event)"></div>
			<div id="p2" ondragenter="return entrar(event)" ondragover="return encima(event)"
				ondrop="return soltar(event)" ondragleave="return abortar(event)"></div>
			<div id="p3" ondragenter="return entrar(event)" ondragover="return encima(event)"
				ondrop="return soltar(event)" ondragleave="return abortar(event)"></div>
			<div id="p4" ondragenter="return entrar(event)" ondragover="return encima(event)"
				ondrop="return soltar(event)" ondragleave="return abortar(event)"></div>
			<div id="p5" ondragenter="return entrar(event)" ondragover="return encima(event)"
				ondrop="return soltar(event)" ondragleave="return abortar(event)"></div>
			<div id="p6" ondragenter="return entrar(event)" ondragover="return encima(event)"
				ondrop="return soltar(event)" ondragleave="return abortar(event)"></div>
		</div>

	</div>
</body>

</html>